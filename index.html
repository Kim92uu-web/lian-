<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æˆ‘çš„ä¸“å±AIæ‰‹æœº</title>
    <style>
        /* === 1. å…¨å±€ä¸èƒŒæ™¯ === */
        body {
            background-color: #e0e5ec;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            overflow: hidden;
            user-select: none; /* ç¦æ­¢é€‰ä¸­æ–‡æœ¬ï¼Œæ›´åƒAPP */
        }

        /* === 2. æ‰‹æœºæœºèº« === */
        .phone-case {
            width: 320px;
            height: 660px;
            background-color: #A9A9A9; /* é»‘è‰²è¾¹æ¡†æ›´æœ‰è´¨æ„Ÿ */
            border-radius: 55px;
            padding: 12px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            position: relative;
            box-sizing: border-box;
        }

        /* === 3. å±å¹• (æ ¸å¿ƒåŒºåŸŸ) === */
        .screen {
            width: 100%;
            height: 100%;
            /* --- ã€è¿™é‡Œæ˜¯é»˜è®¤å£çº¸ URLã€‘ --- */
            background-image: url('https://img.baidu.re/i/2025/12/zcj2xa.jpeg'); 
            background-size: cover;
            background-position: center;
            border-radius: 45px;
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
        }

                        <!-- çµåŠ¨å²› (HTMLç»“æ„æ›´æ–°) -->
                <div class="dynamic-island-trigger" id="island" onclick="toggleIsland()">
                    <div class="island-content" id="islandContent" onclick="event.stopPropagation()">
                        <!-- å¤´åƒ -->
                        <img src="https://img.baidu.re/i/2025/12/130rkrb.jpeg
" id="islandImg" class="island-avatar">
                        
                        <!-- æ–‡å­— -->
                        <span id="islandText">æ¬¢è¿å›å®¶</span>
                        
                        <!-- æŒ‰é’®ç»„ -->
                        <div class="island-btn-group">
                            <button onclick="https://img.baidu.re/i/2025/12/fn9o9g.png
">åº“æ´›ç±³</button>
                            <button onclick="https://img.baidu.re/i/2025/12/fo1l0j.png
">è½»æ¾ç†Š</button>
                            <button onclick="https://img.baidu.re/i/2025/12/fog7ky.png
">å››å¶è‰</button>
                        </div>
                        
                        <!-- è¾“å…¥æ¡† -->
                        <input type="text" class="island-input" placeholder="ä¿®æ”¹æ–‡æ¡ˆ..." onchange="updateIslandText(this.value)">
                    </div>
                </div>
        /* çµåŠ¨å²›æœ¬ä½“ (ç‚¹å‡»åŒºåŸŸ) */
        .dynamic-island-trigger {
            position: absolute;
            top: 10px; left: 50%;
            transform: translateX(-50%);
            width: 100px; height: 30px;
            background: #F5F5DC;
            border-radius: 20px;
            z-index: 201;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        /* çµåŠ¨å²›å±•å¼€åçš„å†…å®¹ (é»˜è®¤éšè—) */
        .island-content {
            display: none;
            flex-direction: column;
            align-items: center;
            width: 100%; height: 100%;
            color: white;
            font-size: 12px;
        }
        
                /* === çµåŠ¨å²›æ ·å¼ (ä¿®å¤ç‰ˆ) === */
        
        /* çµåŠ¨å²›æœ¬ä½“ (ç‚¹å‡»åŒºåŸŸ) */
        .dynamic-island-trigger {
            position: absolute;
            top: 10px; left: 50%;
            transform: translateX(-50%);
            width: 100px; height: 30px;
            background: #F5F5DC; /* é»˜è®¤é»‘è‰²èƒŒæ™¯ */
            border-radius: 20px;
            z-index: 201;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            
            /* æ–°å¢ï¼šåº•å›¾èƒŒæ™¯è®¾ç½® (é»˜è®¤ä¸æ˜¾ç¤ºï¼Œå±•å¼€æ‰æ˜¾ç¤º) */
            background-size: cover;
            background-position: center;
        }

        /* çµåŠ¨å²›å±•å¼€åçš„æ ·å­ */
        .dynamic-island-trigger.expanded {
            width: 290px;        /* ç¨å¾®åŠ å®½ */
            height: 150px;       /* å…³é”®ï¼šä»120pxåŠ é«˜åˆ°160pxï¼Œè§£å†³æˆªæ–­é—®é¢˜ */
            border-radius: 35px;
            padding: 20px;
            flex-direction: column;
            justify-content: flex-start; /* å†…å®¹ä»ä¸Šå¾€ä¸‹æ’ */
            
            /* å±•å¼€æ—¶çš„åŠé€æ˜é»‘åº•ï¼Œé˜²æ­¢æ–‡å­—çœ‹ä¸æ¸… */
            box-shadow: inset 0 0 0 1000px rgba(0,0,0,0.6); 
        }

        /* å†…éƒ¨å†…å®¹å¸ƒå±€ä¼˜åŒ– */
        .island-content {
            display: none;
            flex-direction: column;
            align-items: center;
            width: 100%; 
            height: 100%;
            color: white;
            font-size: 13px;
            gap: 12px; /* å¢åŠ å…ƒç´ é—´è· */
        }
        
        /* ä¸‰ä¸ªåˆ‡æ¢æŒ‰é’® */
        .island-btn-group {
            display: flex;
            gap: 10px;
            margin-top: 5px;
        }
        .island-btn-group button {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 11px;
            cursor: pointer;
        }

        /* è¾“å…¥æ¡†ç¾åŒ– */
        .island-input {
            width: 90%;
            height: 32px;
            background: rgba(255,255,255,0.15);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            text-align: center;
            border-radius: 10px;
            margin: 0 !important; /* å¼ºåˆ¶è¦†ç›–å…¨å±€æ ·å¼ */
        }
        .island-input::placeholder { color: rgba(255,255,255,0.6); }

        /* çµåŠ¨å²›å†…çš„å›¾ç‰‡å½¢è±¡ */
        .island-avatar {
            width: 50px; height: 50px;
            border-radius: 50%;
            background-color: #333;
            margin-bottom: 8px;
            object-fit: cover;
        }

        /* === 5. æ¡Œé¢ç¿»é¡µå®¹å™¨ === */
        .desktop-slider {
            flex: 1;
            display: flex;
            overflow-x: auto;
            scroll-snap-type: x mandatory; /* å¼ºåˆ¶ç¿»é¡µæ•ˆæœ */
            scrollbar-width: none; /* éšè—æ»šåŠ¨æ¡ */
        }
        .desktop-slider::-webkit-scrollbar { display: none; }

        .desktop-page {
            min-width: 100%; /* ä¸€é¡µå æ»¡å±å¹• */
            height: 100%;
            scroll-snap-align: start;
            padding: 20px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* === 6. æ¡Œé¢å°ç»„ä»¶ (Widgets) === */
        .widget-row {
            display: flex;
            gap: 15px;
            height: 130px;
        }
        .widget {
            flex: 1;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 15px;
            color: #800000;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .widget-title { font-size: 12px; opacity: 0.8; text-transform: uppercase; }
        .widget-content { font-size: 24px; font-weight: bold; }
        .weather-info { font-size: 14px; opacity: 0.9; }

        /* === 7. è½¯ä»¶å›¾æ ‡ç½‘æ ¼ === */
        .app-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .app-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            cursor: pointer;
        }
        .app-icon:active { opacity: 0.7; transform: scale(0.95); }

        /* å›¾æ ‡å›¾ç‰‡æ ·å¼ */
        .icon-img {
            width: 55px; height: 55px;
            border-radius: 14px;
            object-fit: cover; /* ä¿è¯å›¾ç‰‡ä¸å˜å½¢ */
            background-color: #eee; /* å›¾ç‰‡æœªåŠ è½½æ—¶çš„åº•è‰² */
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        
        .app-name { color: white; font-size: 11px; text-shadow: 0 1px 2px rgba(0,0,0,0.8); }

        /* === 8. APP çª—å£ & å±‚çº§è¿”å›ç³»ç»Ÿ === */
        .app-window {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #fff;
            z-index: 100;
            display: none; /* é»˜è®¤éšè— */
            flex-direction: column;
            animation: slideUp 0.3s ease-out;
        }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

        /* APP å†…éƒ¨çš„å­é¡µé¢ (ç”¨äºå±‚çº§æµ‹è¯•) */
        .sub-page {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #f0f2f5;
            z-index: 101;
            display: none;
            padding-top: 50px;
            flex-direction: column;
            align-items: center;
        }

        /* ç®€å•çš„ APP å¤´éƒ¨ */
        .app-header {
            padding: 45px 20px 10px;
            font-size: 18px; font-weight: bold;
            background: #fff;
            border-bottom: 1px solid #eee;
        }

                /* === åº•éƒ¨ç™½æ¡ (Home Indicator) - ä¿®å¤ç‰ˆ === */
        .home-indicator {
            position: absolute;
            bottom: 0;           /* æ”¹ä¸ºè´´åº• */
            left: 0;
            width: 100%;
            height: 40px;        /* å…³é”®ï¼šæŠŠé«˜åº¦ä» 20px å¢åŠ åˆ° 40pxï¼Œæ‰©å¤§ç‚¹å‡»çƒ­åŒº */
            display: flex;
            justify-content: center;
            align-items: flex-end; /* è®©ç™½æ¡é ä¸‹æ˜¾ç¤º */
            padding-bottom: 8px;   /* è§†è§‰ä¸Šç™½æ¡çš„ä½ç½® */
            z-index: 9999;       /* å…³é”®ï¼šå¼ºåˆ¶æœ€é«˜å±‚çº§ï¼Œé˜²æ­¢è¢«APPé®æŒ¡ */
            cursor: pointer;
            /* è°ƒè¯•ç”¨ï¼šå¦‚æœè¿˜ç‚¹ä¸åˆ°ï¼ŒæŠŠä¸‹é¢è¿™è¡Œæ³¨é‡Šå–æ¶ˆï¼Œçœ‹çœ‹çº¢æ¡†åœ¨å“ªé‡Œ */
            /* background: rgba(255, 0, 0, 0.2); */ 
        }
        
        .home-bar { 
            width: 130px; 
            height: 5px; 
            background-color: white; 
            border-radius: 100px; 
            box-shadow: 0 1px 3px rgba(0,0,0,0.3);
            pointer-events: none; /* è®©ç‚¹å‡»ç©¿é€ç™½æ¡æœ¬èº«ï¼Œç›´æ¥ç‚¹åˆ°çˆ¶å®¹å™¨ */
            transition: background-color 0.3s; /* å¢åŠ å˜è‰²è¿‡æ¸¡åŠ¨ç”» */
        }
        
        /* æ‰“å¼€APPåç™½æ¡å˜é»‘ */
        .app-active .home-bar { background-color: #222; }
        /* æ‰“å¼€APPåç™½æ¡å˜é»‘ */
        .app-active .home-bar { background-color: #333; }

        /* è¾“å…¥æ¡†å’ŒæŒ‰é’®æ ·å¼ */
        input, select { width: 90%; padding: 10px; margin: 10px 0; border-radius: 10px; border:1px solid #ddd; }
        .btn { padding: 10px 20px; background: #000; color: #fff; border-radius: 10px; border: none; cursor: pointer; }
    </style>
</head>
<body>

    <div class="phone-case">
        <div class="screen" id="mainScreen">
            
            <!-- 1. é¡¶éƒ¨çŠ¶æ€æ  -->
            <div class="status-bar-area">
                <span id="statusBarTime">12:00</span>
                <!-- çµåŠ¨å²› (ç‚¹å‡»åŒºåŸŸ) -->
                <div class="dynamic-island-trigger" id="island" onclick="toggleIsland()">
                    <!-- æ”¶èµ·çŠ¶æ€æ²¡å†…å®¹ -->
                    <div class="island-content" id="islandContent" onclick="event.stopPropagation()">
                        <!-- è¿™é‡Œçš„å›¾ç‰‡éœ€è¦ä½ è‡ªå·±æ¢ -->
                        <img src="https://img.baidu.re/i/2025/12/126dzsd.jpeg
" id="islandImg" class="island-avatar">
                        <span id="islandText">å¹¸ç¦å°±æ˜¯æœ‰ä½ åœ¨>xingâ€†f
                        <div style="margin-top:10px; display:flex; gap:5px;">
                            <button onclick="changeIsland('kuromi')" style="font-size:10px;">åº“æ´›ç±³</button>
                            <button onclick="changeIsland('bear')" style="font-size:10px;">è½»æ¾ç†Š</button>
                            <button onclick="changeIsland('clover')" style="font-size:10px;">å››å¶è‰</button>
                        </div>
                        <input type="text" placeholder="ä¿®æ”¹æ–‡æ¡ˆ..." onchange="updateIslandText(this.value)" style="width:80%; height:20px; font-size:10px;">
                    </div>
                </div>
                <!-- éšæœºå¤©æ°” + ç”µé‡ -->
                <span><span id="weatherIcon">â˜€ï¸</span> 100%</span>
            </div>

            <!-- 2. æ¡Œé¢ç¿»é¡µåŒºåŸŸ -->
            <div class="desktop-slider">
                
                <!-- === ç¬¬ 1 é¡µ === -->
                <div class="desktop-page">
                    <!-- å°ç»„ä»¶è¡Œ -->
                    <div class="widget-row">
                        <div class="widget">
                            <span class="widget-title">Calendar</span>
                            <div class="widget-content">å‘¨äº”<br><span style="font-size:16px">12æœˆ15æ—¥</span></div>
                        </div>
                        <div class="widget" style="background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%); color:#333;">
                            <span class="widget-title">Battery</span>
                            <div class="widget-content">âš¡ 100%</div>
                            <div class="weather-info">ç³»ç»ŸçŠ¶æ€ä¼˜</div>
                        </div>
                    </div>

                    <!-- åº”ç”¨å›¾æ ‡ç½‘æ ¼ -->
                    <div class="app-grid">
                        <!-- AI åŠ©æ‰‹ (å¾®ä¿¡) -->
                        <div class="app-icon" onclick="openApp('ai-chat')">
                            <!-- ã€æ¢å›¾å¤„1ã€‘ -->
                            <img src="https://img.baidu.re/i/2025/12/11a5kt2.jpeg

" class="icon-img">
                            <span class="app-name">AIåŠ©æ‰‹</span>
                        </div>
                        <!-- è®¾ç½® -->
                        <div class="app-icon" onclick="openApp('settings')">
                            <!-- ã€æ¢å›¾å¤„2ã€‘ -->
                            <img src="https://img.baidu.re/i/2025/12/11bt3fm.jpeg

" class="icon-img">
                            <span class="app-name">è®¾ç½®</span>
                        </div>
                        <!-- ç›¸å†Œ -->
                        <div class="app-icon" onclick="openApp('gallery')">
                            <!-- ã€æ¢å›¾å¤„3ã€‘ -->
                            <img src="https://img.baidu.re/i/2025/12/11bz4bm.jpeg

" class="icon-img">
                            <span class="app-name">ç›¸å†Œ</span>
                        </div>
                        <!-- éŸ³ä¹ -->
                        <div class="app-icon">
                            <!-- ã€æ¢å›¾å¤„4ã€‘ -->
                            <img src="https://img.baidu.re/i/2025/12/11cetl9.jpeg

" class="icon-img">

                            <span class="app-name">éŸ³ä¹</span>
                        </div>
                    </div>
                </div>

                <!-- === ç¬¬ 2 é¡µ (å‘å³æ»‘) === -->
                <div class="desktop-page">
                     <div class="app-grid">
                        <!-- è®ºå› -->
                        <div class="app-icon">
                            <!-- ã€æ¢å›¾å¤„5ã€‘ -->
                            <img src="https://img.baidu.re/i/2025/12/11d6ldz.jpeg

" class="icon-img">
                            <span class="app-name">è®ºå›</span>
                        </div>
                        <!-- æŒ‡ä»¤ç©æ³• -->
                        <div class="app-icon">
                            <!-- ã€æ¢å›¾å¤„6ã€‘ -->
                            <img src="https://img.baidu.re/i/2025/12/121fo49.jpeg

" class="icon-img">
                            <span class="app-name">æŒ‡ä»¤å‰§åœº</span>
                        </div>
                    </div>
                </div>

            </div>

            <!-- === 3. APP ç•Œé¢åŒºåŸŸ === -->
            
            <!-- è®¾ç½® APP -->
            <div id="settings-app" class="app-window">
                <div class="app-header">è®¾ç½®</div>
                <div style="padding:20px;">
                    <label>æ›´æ¢å£çº¸ URL</label>
                    <input type="text" id="wallpaperInput" placeholder="è¾“å…¥å›¾ç‰‡é“¾æ¥...">
                    <button class="btn" onclick="saveWallpaper()">åº”ç”¨å£çº¸</button>
                    <hr>
                    <button class="btn" onclick="openSubPage('settings-sub')">è¿›å…¥å­èœå•æµ‹è¯•(ç‚¹æˆ‘)</button>
                    
                    <!-- è®¾ç½®é‡Œçš„å­é¡µé¢ (æµ‹è¯•å±‚çº§è¿”å›) -->
                    <div id="settings-sub" class="sub-page">
                        <h2>è¿™æ˜¯äºŒçº§èœå•</h2>
                        <p>ç‚¹å‡»åº•éƒ¨ç™½æ¡ä¼šå…ˆå›åˆ°è®¾ç½®é¡µï¼Œå†ç‚¹ä¸€æ¬¡æ‰å›æ¡Œé¢ã€‚</p>
                    </div>
                </div>
            </div>

            <!-- AI èŠå¤© APP -->
            <div id="ai-chat-app" class="app-window">
                <div class="app-header">AI åŠ©æ‰‹</div>
                <div style="text-align:center; margin-top:50px; color:#999;">
                    èŠå¤©åŠŸèƒ½åŒä¸Šä¸ªç‰ˆæœ¬...<br>(UIä¼˜åŒ–ä¸­)
                </div>
            </div>

             <!-- ç›¸å†Œ APP -->
             <div id="gallery-app" class="app-window">
                <div class="app-header">æˆ‘çš„ç›¸å†Œ</div>
                <div style="padding:20px; display:grid; grid-template-columns: repeat(3, 1fr); gap:10px;">
                    <!-- æ¨¡æ‹Ÿç›¸å†Œæ ¼å­ -->
                    <div style="background:#eee; height:80px; border-radius:8px;"></div>
                    <div style="background:#eee; height:80px; border-radius:8px;"></div>
                    <div style="background:#eee; height:80px; border-radius:8px;"></div>
                </div>
            </div>


            <!-- 4. åº•éƒ¨ Home æ¡ -->
            <div class="home-indicator" id="homeBtn" onclick="handleHomeClick()">
                <div class="home-bar"></div>
            </div>

        </div>
    </div>

    <script>
        // === 1. çŠ¶æ€æ é€»è¾‘ ===
        function updateStatus() {
            // æ—¶é—´
            const now = new Date();
            const h = String(now.getHours()).padStart(2, '0');
            const m = String(now.getMinutes()).padStart(2, '0');
            document.getElementById('statusBarTime').innerText = `${h}:${m}`;
            
            // éšæœºå¤©æ°” (å¶å°”å˜ä¸€ä¸‹)
            const weathers = ['â˜€ï¸', 'â˜ï¸', 'ğŸŒ§ï¸', 'âš¡', 'â„ï¸', 'ğŸŒ¤ï¸'];
            if(Math.random() > 0.9) { // 10%æ¦‚ç‡å˜å¤©æ°”
                const w = weathers[Math.floor(Math.random() * weathers.length)];
                document.getElementById('weatherIcon').innerText = w;
            }
        }
        setInterval(updateStatus, 1000);

              // === 2. çµåŠ¨å²›é€»è¾‘ (å¢å¼ºç‰ˆ) ===
        const island = document.getElementById('island');
        const islandContent = document.getElementById('islandContent');
        const islandImg = document.getElementById('islandImg');
        let islandState = false; 

        // ã€URLé…ç½®åŒºï¼šè¯·åœ¨è¿™é‡Œå¡«å…¥ä½ çš„å›¾ç‰‡é“¾æ¥ã€‘
        const islandConfig = {
            // 1. åº“æ´›ç±³é…ç½®
            'kuromi': {
                avatar: 'https://img.baidu.re/i/2025/12/12qme4g.jpeg',    // <-- å¡«è¿™é‡Œ
                bg: 'https://img.baidu.re/i/2025/12/12r1p2n.jpeg'       // <-- å¡«è¿™é‡Œ (çµåŠ¨å²›å±•å¼€åçš„åº•å›¾)
            },
            // 2. è½»æ¾ç†Šé…ç½®
            'bear': {
                avatar: 'https://img.baidu.re/i/2025/12/12r7enq.jpeg',    // <-- å¡«è¿™é‡Œ
                bg: 'https://img.baidu.re/i/2025/12/12rabyd.jpeg'       // <-- å¡«è¿™é‡Œ
            },
            // 3. å››å¶è‰é…ç½®
            'clover': {
                avatar: 'https://img.baidu.re/i/2025/12/12rlxmp.jpeg',    // <-- å¡«è¿™é‡Œ
                bg: 'https://img.baidu.re/i/2025/12/12rqiva.jpeg'       // <-- å¡«è¿™é‡Œ
            }
        };

        function toggleIsland() {
            islandState = !islandState;
            if(islandState) {
                island.classList.add('expanded');
                // å±•å¼€åŠ¨ç”»å»¶è¿Ÿæ˜¾ç¤ºå†…å®¹
                setTimeout(() => islandContent.style.display = 'flex', 250);
            } else {
                islandContent.style.display = 'none';
                island.classList.remove('expanded');
            }
        }

        // åˆ‡æ¢æ¨¡å¼åŠŸèƒ½
        function changeIsland(type) {
            const config = islandConfig[type];
            if(config) {
                // 1. æ¢å¤´åƒ
                islandImg.src = config.avatar;
                // 2. æ¢çµåŠ¨å²›çš„åº•å›¾èƒŒæ™¯
                island.style.backgroundImage = `url('${config.bg}')`;
            }
        }

        function updateIslandText(val) {
            document.getElementById('islandText').innerText = val;
        }

        // ã€URLä¿®æ”¹å¤„ã€‘ä½ éœ€è¦åœ¨è¿™é‡Œå¡«å…¥ä½ çš„åº“æ´›ç±³ã€è½»æ¾ç†Šã€å››å¶è‰çš„å›¾ç‰‡é“¾æ¥
        const islandImages = {
            'kuromi': 'https://via.placeholder.com/50/800080/FFFFFF?text=Kuromi', 
            'bear': 'https://via.placeholder.com/50/8B4513/FFFFFF?text=Bear',
            'clover': 'https://via.placeholder.com/50/008000/FFFFFF?text=Clover'
        };

        function toggleIsland() {
            islandState = !islandState;
            if(islandState) {
                island.classList.add('expanded');
                setTimeout(() => islandContent.style.display = 'flex', 200);
            } else {
                islandContent.style.display = 'none';
                island.classList.remove('expanded');
            }
        }

        function changeIsland(type) {
            islandImg.src = islandImages[type];
        }
        function updateIslandText(val) {
            document.getElementById('islandText').innerText = val;
        }

        // === 3. å£çº¸æ›´æ¢é€»è¾‘ ===
        function saveWallpaper() {
            const url = document.getElementById('wallpaperInput').value;
            if(url) {
                document.getElementById('mainScreen').style.backgroundImage = `url('${url}')`;
                localStorage.setItem('my_wallpaper', url);
                alert('å£çº¸å·²æ›´æ¢');
            }
        }
        // è¯»å–å£çº¸
        const savedWP = localStorage.getItem('my_wallpaper');
        if(savedWP) document.getElementById('mainScreen').style.backgroundImage = `url('${savedWP}')`;


        // === 4. å¯¼èˆªç³»ç»Ÿ (æ ¸å¿ƒï¼šå±‚çº§è¿”å›) ===
        let navStack = []; // å¯¼èˆªå†å²æ ˆ

        function openApp(appId) {
            // è®°å½•æ‰“å¼€äº†å“ªä¸ªAPP
            navStack.push(appId);
            
            // UIå˜æ›´
            document.getElementById(appId + '-app').style.display = 'flex';
            document.getElementById('homeBtn').classList.add('app-active'); // ç™½æ¡å˜é»‘
        }

        function openSubPage(pageId) {
            // è¿›å…¥äºŒçº§é¡µé¢ï¼Œæ¨å…¥æ ˆ
            navStack.push(pageId);
            document.getElementById(pageId).style.display = 'flex';
        }

        function handleHomeClick() {
            if (navStack.length === 0) return; // å·²ç»åœ¨æ¡Œé¢äº†

            // è·å–å½“å‰æ‰€åœ¨çš„é¡µé¢ID
            const currentId = navStack.pop(); 
            const currentEl = document.getElementById(currentId);

            // éšè—å½“å‰é¡µ
            if(currentEl) currentEl.style.display = 'none';

            // å¦‚æœæ ˆç©ºäº†ï¼Œè¯´æ˜å›åˆ°äº†æ¡Œé¢
            if (navStack.length === 0) {
                document.getElementById('homeBtn').classList.remove('app-active'); // ç™½æ¡å˜ç™½
            } 
            // å¦‚æœæ ˆé‡Œè¿˜æœ‰ä¸œè¥¿ï¼Œè¯´æ˜å›åˆ°äº†ä¸Šä¸€çº§ (æ¯”å¦‚ä»äºŒçº§èœå•å›åˆ°APPä¸»é¡µ)
            // è¿™é‡Œä¸éœ€è¦é¢å¤–æ“ä½œï¼Œå› ä¸ºAPPä¸»é¡µæœ¬æ¥å°±æ˜¯ display:flex çš„ï¼Œæ²¡è¢«éšè—
        }

    </script>
</body>
</html>
